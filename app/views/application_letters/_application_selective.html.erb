<% if can? :edit_applicants, Event %>
    <!--TODO: Change to event status check -->
    <% if application_letter.event.application_status_locked %>
        <%= t("application_status.#{application_letter.status}") %>
        <% if application_letter.status.to_sym == :accepted %>
            <%= link_to t('application_status.canceled'), update_application_letter_status_path(application_letter, 'application_letter[status]': :canceled),
                        method: :put, class: 'btn btn-default' %>
        <% end %>
    <% else %>
      <%= form_for :application_letter, url: update_application_letter_status_path(application_letter), html: {method: :put} do |f| %>
          <div class="form-group">
            <div class="btn-group">
              <% @selectable_statuses.each do |key| %>
                  <label class="btn btn-default <%= 'active' if application_letter.status == key %>">
                    <%= f.radio_button :status, key, checked: application_letter.status == key,
                                       onclick: 'this.form.submit()' %>
                    <%= t("application_status.#{key}") %>
                  </label>
              <% end %>
            </div>
            <%= f.error_span(:status) %>
          </div>
      <% end %>
    <% end %>
<% elsif can? :view_applicants, Event %>
    <%= t("application_status.#{application_letter.status}") %>
<% else %>
    <%= t("application_status.#{:pending}") %>
<% end %>
